![Paraglide JS header image](https://cdn.jsdelivr.net/gh/opral/monorepo@latest/inlang/source-code/paraglide/paraglide-js/assets/paraglide-js-header.png)

<doc-features>
<doc-feature text-color="#0F172A" color="#E1EFF7" title="Internationalized Routing" image="https://cdn.jsdelivr.net/gh/opral/monorepo@latest/inlang/source-code/paraglide/paraglide-js-adapter-next/assets/i18n-routing.png"></doc-feature>
<doc-feature text-color="#0F172A" color="#E1EFF7" title="Tiny Bundle Size" image="https://cdn.jsdelivr.net/gh/opral/monorepo@latest/inlang/source-code/paraglide/paraglide-js-adapter-next/assets/bundle-size.png"></doc-feature>
<doc-feature text-color="#0F172A" color="#E1EFF7" title="No route Param needed" image="https://cdn.jsdelivr.net/gh/opral/monorepo@latest/inlang/source-code/paraglide/paraglide-js-adapter-next/assets/no-param.png"></doc-feature>
</doc-features>


# SolidStart Adapter for [Paraglide JS](/m/gerre34r)

Install [ParaglideJS](https://inlang.com/m/gerre34r/library-inlang-paraglideJs) and the [Paraglide SolidStart Adapter](https://inlang.com/m/n860p17j/library-inlang-paraglideJsAdapterSolidStart).

```bash
npx @inlang/paraglide-js@latest init
npm install @inlang/paraglide-js-adapter-solidstart
```

## Getting started

### 0. Set up Paraglide

In the generated `./project.inlang/settings.json`, configure which languages you want to support.

```json
// project.inlang/settings.json
{
	"languageTags": ["en", "de"],
	"sourceLanguageTag": "en"
}
```

Create a `./messages` folder with a json file per language and add some messages

```json
// messages/en.json
{
	"hello": "Hello {name}"
}
```

### 1. Add the Vite Plugin

In `app.config.ts` add the paraglide vite plugin.

```ts
// make sure to import from /vite
import { paraglide } from "@inlang/paraglide-js-adapter-solidstart/vite"
import { defineConfig } from "@solidjs/start/config"

export default defineConfig({
	vite: {
		plugins: [
			paraglide({
				project: "./project.inlang", //The path to project.inlang
				outdir: "./src/paraglide", //Where to place the generated files
			}),
		],
	},
})
```

### 2. Use the adapter to wrap paraglide

Pass the runtime generated by [Paraglide](https://inlang.com/m/gerre34r/paraglide-js) to the adapter to create SolidStart-bound functions.

```ts
// i18n.tsx (or where you want to use the adapter)
import * as paraglide from "~/paraglide/runtime.js"
import { createI18n } from "@inlang/paraglide-js-adapter-solidstart"

const { LanguageTagProvider, languageTag, setLanguageTag, } = createI18n(paraglide)
```

### 3. Add the Language Provider

```tsx
// entry-server.tsx
import { createHandler, StartServer } from "@solidjs/start/server"
import { useLocationLanguageTag } from "./i18n.js"

export default createHandler(() => {
	const language_tag = useLocationLanguageTag() ?? i18n.sourceLanguageTag

	return (
		<StartServer
			document={(props) => (
				<html lang={language_tag}>
					<head>
						{props.assets}
					</head>
					<body>
						<div id="app">{props.children}</div>
						{props.scripts}
					</body>
				</html>
			)}
		/>
	)
})

// app.tsx

import { Router } from "@solidjs/router"
import { FileRoutes } from "@solidjs/start"
import { Suspense } from "solid-js"
import { LanguageTagProvider, useLocationLanguageTag, sourceLanguageTag } from "./i18n.js"

export default function App() {
	// get language tag from URL, or use source language tag as fallback
	const url_language_tag = useLocationLanguageTag()
	const language_tag = url_language_tag ?? sourceLanguageTag

	// 1. provide language tag to your app
	// 2. set html lang attribute
	// 3. make sure the routing doesn't treat the language tag as part of the path

	return (
		<main>
			<Router
				base={url_language_tag}
				root={(props) => (
					<LanguageTagProvider value={language_tag}>
						<Suspense>{props.children}</Suspense>
					</LanguageTagProvider>
				)}
			>
				<FileRoutes />
			</Router>
		</main>
	)
}
```

Take a look at [example/src/app.tsx](https://github.com/thetarnav/paraglide-solidstart-hackernews/blob/main/src/app.tsx) to see how it is used in a example project.

### 5. Use message functions

The language tag of current request is provided by the adapter via a context. All the messgee functions used with this context will be translated to the current language.

```tsx
// uses the context's language tag to translate the message
<h1>{m.greeting({ name: "Loris" })}</h1>

// pass language tag explicitly when used outside of the available context
const language_tag = languageTag() // in component body

<button onClick={e => {
	e.preventDefault()
	alert(
		m.greeting({ name: "Loris" }, { languageTag: language_tag })
	)
}}>
	{m.show_greeting()}
</button>
```

### 6. Switch language

You can switch languages by calling the `setLanguageTag` function provided by the adapter. This will navigate to the translated variant of the current route.

```tsx
<select onChange={(e) => setLanguageTag(e.target.value)}>
	{availableLanguageTags.map((tag) => (
		<option value={tag} selected={tag === languageTag()}>
			{tag}
		</option>
	))}
</select>
```

If you want to navigate to a different route in a specific language, you can use the `translateHref` function provided by the adapter to generate the correct href.

```tsx
<A href={translateHref("/about", "en")}>{m.about()}</A>
```

> ⚠️ Don't use the `translateHref` function on links that point to external websites. It will break the link.

### 7. Alternate links

If you want to provide alternate links to the same page in different languages.

```tsx
const language_tag = languageTag()

<head>
	{availableLanguageTags
		.filter((tag) => tag !== language_tag)
		.map((tag) => (
			<link
				rel="alternate"
				href={translateHref("/", tag)}
				hreflang={tag}
			/>
		))
	}
</head>
```

## Example project

Take a look at the [example in our repository](https://github.com/opral/monorepo/tree/main/inlang/source-code/paraglide/paraglide-js-adapter-solidstart/example).
