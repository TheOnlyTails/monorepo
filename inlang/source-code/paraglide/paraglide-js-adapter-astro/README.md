![Dead Simple i18n. Typesafe, Small Footprint, SEO-Friendly and with an IDE Integration.](https://cdn.jsdelivr.net/gh/opral/monorepo@latest/inlang/source-code/paraglide/paraglide-js-adapter-astro/assets/header.png)

<doc-features>
<doc-feature text-color="#0F172A" color="#E1EFF7" title="Uses astro:i18n for routing" image="https://cdn.jsdelivr.net/gh/opral/monorepo@latest/inlang/source-code/paraglide/paraglide-js-adapter-astro/assets/use-astro-i18n.png"></doc-feature>
<doc-feature text-color="#0F172A" color="#E1EFF7" title="Tiny Bundle Size" image="https://cdn.jsdelivr.net/gh/opral/monorepo@latest/inlang/source-code/paraglide/paraglide-js-adapter-astro/assets/bundle-size.png"></doc-feature>
<doc-feature text-color="#0F172A" color="#E1EFF7" title="Only ships messages used on islands" image="https://cdn.jsdelivr.net/gh/opral/monorepo@latest/inlang/source-code/paraglide/paraglide-js-adapter-astro/assets/islands-only.png"></doc-feature>
</doc-features>

## People Love it

<doc-comments>
<doc-comment text="I was messing with various i18n frameworks and tools in combination with Astro, and must say that Paraglide was the smoothest experience. I have migrated my website from i18next and it was a breeze. SSG and SSR worked out of the box (which was the first one for me), and overall DX is great. Thanks for your work!" author="Dalibor Hon" icon="mdi:discord" data-source="https://discord.com/channels/897438559458430986/1096039983116202034/1220796380772307004"></doc-comment>
<doc-comment text="Awesome library ðŸ™‚ Thanks so much! 1) The docs were simple and straight forward 2) Everything just worked.. no headaches" author="Dimitry" icon="mdi:discord" data-source="https://discord.com/channels/897438559458430986/1083724234142011392/1225658097016766574"></doc-comment>
<doc-comment text="Thank you for that huge work you have done and still doing!" author="ZerdoX-x" icon="mdi:github"></doc-comment>
</doc-comments>

# Getting Started

First, set up [ParaglideJS](https://inlang.com/m/gerre34r/library-inlang-paraglideJs) with the Paraglide CLI. It will ask you:
- Which languages you want to use - The first one being the default (_can_ be changed later)
- Where to place the generated files (use the default)

```bash
npx @inlang/paraglide-js init
```

The CLI will generate a few files:

- `messages/{lang}.json` files where your will translations live.
- A `project.inlang` folder where you can configure your project.

Once that's done, install the Astro Integration and register it in `astro.config.mjs`. Also, set up Astro's i18n routing with the same languages.

```bash
npm i @inlang/paraglide-js-adapter-astro
```

```js
// astro.config.mjs
import paraglide from "@inlang/paraglide-js-adapter-astro"
import { languageTags, sourceLanguageTag } from "./project.inlang/settings.json"

export default {
	// Set up Astro i18n with the same languages as paraglide
	// This is a shorthand way to configure all languages. You can also pass the locales manually & use features like `paths`.
	i18n: {
		locales: languageTags,
		defaultLocale: sourceLanguageTag,
	},

	// Absolute links will use this URL
	site: "https://acme.com",

	integrations: [
		// recommended settings
		paraglide({
			project: "./project.inlang",
			outdir: "./src/paraglide", //where your files should be
		}),
	],
}
```

## Passing the Language to the Client

To save bundle size the integration doesn't ship language detection code to the client. Instead, it will read the `lang` attribute on the `<html>` tag. Make sure it is set correctly.

```astro
//src/layouts/default.astro
---
import { languageTag } from "$paraglide/runtime";
---

<!doctype html>
<html lang={languageTag()} dir={Astro.locals.paraglide.dir}>
    <slot />
</html>
---
```

## Adding & editing Messages

Translations live in `messages/{lang}.json` files. Add a message in there to get started

```json
// messages.en.json
{
	"hello": "Hello {name}!"
}
```

Instead of doing this in the file, you can use the [Sherlock IDE Extension](https://inlang.com/m/r7kp499g/app-inlang-ideExtension) to edit messages right from your code. 

## Using Messages in Code

In code, you can use the messages by importing from `src/paraglide/messages.js`. This file is generated by the compiler

```astro
---
import * as m from "../paraglide/messages.js";
---

<h1>{m.hello({ name: "Samuel" })}</h1>
```

Vite can tree-shake the messages with no extra work from you. Only messages that are used on an Island will be included in the client bundle.

## Configuring Languages

You can configure which languages you support in `project.inlang/settings.json`.

```json
{
	"languageTags": ["en", "de"],
	"sourceLanguageTag": "en"
}
```

If you add a new language, simply add another `{newLang}.json` file in the `messages/` folder.

## Understanding Language Detection

The Integration relies on [`astro:i18n`](https://docs.astro.build/en/guides/internationalization/)'s language detection.

If you place your page in a folder named for the language all messages will be in that language. 

```filesystem
src
â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ en
â”‚   â”‚   â”œâ”€â”€ index.astro
â”‚   â”‚   â””â”€â”€ about.astro
â”‚   â””â”€â”€ de
â”‚       â”œâ”€â”€ index.astro
â”‚       â””â”€â”€ about.astro
```

If a page isn't in a language folder the default language is used.

```filesystem
src
â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ index.astro // default language
â”‚   â”œâ”€â”€ about.astro // default language
â”‚   â””â”€â”€ de
â”‚       â”œâ”€â”€ index.astro // de
â”‚       â””â”€â”€ about.astro // de
```

You can access the current language and text direction via `Astro.locals.paraglide.lang` and `Astro.locals.paraglide.dir` respectively.

## Linking between pages

Because pages in different languages often have different slugs there is no way to automatically generate links in all languages. You will need to define a custom function.

```ts
import type { AvailableLanguageTag } from "./paraglide/runtime.js"

type AbsolutePathname = `/${string}`

const pathnames : Record<AbsolutePathname, 
	Record<AvailableLanguageTag, AbsolutePathname>
> = {
	"/about": {
		en: "/about",
		de: "/de/ueber-uns",
	}
}

// src/linking.ts
export function localizePathname(
	pathname: AbsolutePathname, 
	locale: AvailableLanguageTag
) {
	if(pathnames[pathname]) {
		return pathnames[pathname][locale]
	}
	return pathname
}
```

Then use this function on your links

```tsx
<a href={localizePathname("/about", languageTag())}>{m.about()}</a>
```

## Adding Alternate Links

For SEO reasons, you should add alternate links to your page's head that point to all translations of the current page. Make sure to also include the _current_ language.

Make sure these are full hrefs, including the protocol and origin, not just the path.

```html
<head>
	<link rel="alternate" hreflang="en" href="https://acme.com/en/about" />
	<link rel="alternate" hreflang="de" href="https://acme.com/de/ueber-uns" />
</head>
```

You can construct an href from a pathname and `Astro.site` using the `URL` constructor

```ts
const href = new URL("/about", Astro.site).href
```

## Roadmap

- Improved Server-Rendering support
- Automatic Link-Map generation

## Playground

Check out an example Astro project with Paraglide integration on [StackBlitz](https://stackblitz.com/~/github.com/LorisSigrist/paraglide-astro-example)
